{"inkVersion":21,"root":[[{"->":"main"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"mod_stats":[{"temp=":"val"},{"temp=":"stat"},"ev",{"VAR?":"stat"},{"VAR?":"val"},"+",{"temp=":"stat","re":true},"/ev",{"#f":1}],"main":[["^Testing dialogue 1. Current charm is ","ev",{"VAR?":"charm"},"out","/ev","^.","\n","^Testing dialogue 2! Make a choice.","\n","ev","str","^Choice 1","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Choice 2","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^You picked the first option.","\n","^We can arbitrarily mark this option as correct,","\n","^by setting the variable in inky like so:","\n","ev",true,"/ev",{"VAR=":"choice1passed","re":true},"^(Please read the code, it makes more sense there)","\n","^Anyway, here are two more choices:","\n",["ev","str","^Choice 1a","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Choice 1b","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^This is branch 1a, which is incorrect.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^This is branch 1b, which is correct.","\n","ev",true,"/ev",{"VAR=":"choice2passed","re":true},{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Additional dialogue after this choice","\n",{"->":"main.0.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["\n","^You picked the second option.","\n","^This option is arbitrarily marked as incorrect.","\n","^But you can still redeem yourself!","\n",["ev","str","^Choice 2a","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Choice 2b","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^Branch 2a is incorrect.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^Branch 2b is correct.","\n","ev",true,"/ev",{"VAR=":"choice2passed","re":true},{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Additional dialogue after choice 2","\n",{"->":"main.0.g-0"},{"#f":5}]}],{"#f":5}],"g-0":["^Now we merge back after the sub-branches.","\n","^We will now decide whether or not we passed the flirt.","\n",["ev",{"VAR?":"choice1passed"},{"VAR?":"choice2passed"},"&&","/ev",{"->":".^.b","c":true},{"b":["\n","^By getting both answers correct you automatically pass the flirt.","\n","ev",true,"/ev",{"VAR=":"flirtpassed","re":true},{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"choice1passed"},{"VAR?":"choice2passed"},"||","!","/ev",{"->":".^.b","c":true},{"b":["\n","^By getting both answers wrong you automatically fail the flirt.","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","^If only one of the answers are correct, we determine based on the charm to see if the flirt succeeds;","\n",["ev",{"VAR?":"charm"},{"VAR?":"threshold"},">=","/ev",{"->":".^.b","c":true},{"b":["\n","^The flirt succeeds if you make the charm threshold.","\n","ev",true,"/ev",{"VAR=":"flirtpassed","re":true},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^The flirt fails if you fail to make the charm threshold.","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n",["ev",{"VAR?":"flirtpassed"},"/ev",{"->":".^.b","c":true},{"b":["\n","^If our flirt has succeeded, we also set the modification of charm, depending on the answers that were correct.","\n",["ev",{"VAR?":"choice1passed"},{"VAR?":"choice2passed"},"&&","/ev",{"->":".^.b","c":true},{"b":["\n","^Getting both right might add 3 charm, for example","\n","ev",{"^var":"charm","ci":-1},3,{"f()":"mod_stats"},"out","/ev","\n","^Your charm increased by 3! Your charm is now at ","ev",{"VAR?":"charm"},"out","/ev","^!","\n",{"->":".^.^.^.6"},null]}],["ev",{"VAR?":"choice1passed"},{"VAR?":"choice2passed"},"!","&&","/ev",{"->":".^.b","c":true},{"b":["\n","^If you get the second one wrong, you would get less charm","\n","ev",{"^var":"charm","ci":-1},2,{"f()":"mod_stats"},"out","/ev","\n","^Your charm increased by 2! Your charm is now at ","ev",{"VAR?":"charm"},"out","/ev","^!","\n",{"->":".^.^.^.6"},null]}],["ev",{"VAR?":"choice2passed"},{"VAR?":"choice1passed"},"!","&&","/ev",{"->":".^.b","c":true},{"b":["\n","^If you get the first one wrong, you would get less charm","\n","ev",{"^var":"charm","ci":-1},1,{"f()":"mod_stats"},"out","/ev","\n","^Your charm increased by 1! Your charm is now at ","ev",{"VAR?":"charm"},"out","/ev","^!","\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"->":".^.^.^.10"},null]}],"nop","\n","end",{"#f":5}]}],{"#f":1}],"global decl":["ev",0,{"VAR=":"charm"},5,{"VAR=":"threshold"},false,{"VAR=":"choice1passed"},false,{"VAR=":"choice2passed"},false,{"VAR=":"flirtpassed"},"/ev","end",null],"#f":1}],"listDefs":{}}